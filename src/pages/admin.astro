---
import AdminLayout from "../layouts/AdminLayout.astro";
import AdminPage from "../assets/AdminPage";

import { validateAdminToken } from "../utils/authAdmin";

let user: any;
try {
  user = validateAdminToken(Astro.request.headers);
} catch (e) {
  console.log(e);
  return Astro.redirect("/login");
}

import { getSessionName } from "../utils/getName";
const name = getSessionName(Astro.request.headers);
---

<AdminLayout Title="Admin Form" Description="Admin Form" Active="Admin Form">
  <AdminPage client:load name={name} />
</AdminLayout>
